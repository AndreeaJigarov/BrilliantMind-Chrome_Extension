/* Autism: reduce bright colors and strong visual contrasts
	 - Applies a gentle desaturation and contrast reduction across the page
	 - Keeps text color inheritance to preserve readability
	 - Allows opt-out for images with `data-preserve-color="true"`
*/

.autism-color-reduced, .autism-color-reduced * {
	transition: filter 220ms ease, background-color 220ms ease, color 220ms ease !important;
}

/* Global softening: desaturate and slightly reduce contrast/brightness */
.autism-color-reduced html, .autism-color-reduced body {
	filter: saturate(0.65) contrast(0.95) brightness(0.98);
}

/* Keep images and media slightly more controlled but readable */
.autism-color-reduced img,
.autism-color-reduced picture,
.autism-color-reduced video,
.autism-color-reduced svg {
	filter: saturate(0.6) contrast(0.95) brightness(0.98);
	/* Prevent heavy shadows from being visually jarring */
	box-shadow: none !important;
}

/* Soften strong borders and shadows that create harsh contrast */
.autism-color-reduced * {
	box-shadow: none !important;
	border-color: rgba(0,0,0,0.14) !important;
}

/* Provide a subtle wash over non-transparent backgrounds to mute extremes.
	 Uses a pseudo-element so we don't permanently overwrite author colors. */
.autism-color-reduced [style*="background"],
.autism-color-reduced [style*="background-color"] {
	position: relative;
}
.autism-color-reduced [style*="background" ]::after,
.autism-color-reduced [style*="background-color"]::after {
	content: "";
	pointer-events: none;
	position: absolute;
	inset: 0;
	background: rgba(255,255,255,0.06);
	mix-blend-mode: lighten;
}

/* Utility class for extra muting */
.autism-muted {
	filter: saturate(0.5) contrast(0.9) brightness(0.95) !important;
}

/* Allow authors/pages to opt images out of desaturation */
.autism-color-reduced img[data-preserve-color="true"] {
	filter: none !important;
}

/* Ensure text color remains readable and inherited */
.autism-color-reduced p,
.autism-color-reduced span,
.autism-color-reduced a,
.autism-color-reduced h1,
.autism-color-reduced h2,
.autism-color-reduced h3,
.autism-color-reduced h4,
.autism-color-reduced h5,
.autism-color-reduced h6 {
	color: inherit !important;
}

/* Hide extra page UI (table of contents, sidebars, banners, sticky UI) */
.autism-hide-extras .toc,
.autism-hide-extras #toc,
.autism-hide-extras .table-of-contents,
.autism-hide-extras .mw-navigation,
.autism-hide-extras #mw-panel,
.autism-hide-extras .sidebar,
.autism-hide-extras aside,
.autism-hide-extras nav,
.autism-hide-extras header,
.autism-hide-extras footer,
.autism-hide-extras .site-tools,
.autism-hide-extras .search,
.autism-hide-extras .searchbox,
.autism-hide-extras .infobox,
.autism-hide-extras .mw-head,
.autism-hide-extras .portal,
.autism-hide-extras .mw-editsection,
.autism-hide-extras .navbox,
.autism-hide-extras .metadata,
.autism-hide-extras .mw-indicators,
.autism-hide-extras .mw-page-header,
.autism-hide-extras [role="banner"],
.autism-hide-extras [role="navigation"],
.autism-hide-extras [role="complementary"],
.autism-hide-extras [role="search"] {
	display: none !important;
	visibility: hidden !important;
	height: 0 !important;
	width: 0 !important;
	overflow: hidden !important;
}

/* Hide many fixed/sticky UI elements which often act as distractions */
.autism-hide-extras [style*="position:fixed"],
.autism-hide-extras [style*="position:sticky"] {
	display: none !important;
}

/* Vertical layout and spacing for primary content */
.autism-vertical-layout main,
.autism-vertical-layout article,
.autism-vertical-layout #content,
.autism-vertical-layout #mw-content-text {
	display: block !important;
	width: 100% !important;
	max-width: 900px !important;
	margin: 18px auto !important;
	padding: 12px 18px !important;
}

.autism-vertical-layout main > *,
.autism-vertical-layout article > *,
.autism-vertical-layout #content > * {
	display: block !important;
	width: 100% !important;
	margin: 14px 0 !important;
	padding: 0 !important;
}

.autism-vertical-layout h1,
.autism-vertical-layout h2,
.autism-vertical-layout h3 {
	margin-top: 22px !important;
	margin-bottom: 10px !important;
}

.autism-vertical-layout p,
.autism-vertical-layout li,
.autism-vertical-layout blockquote {
	font-size: 18px !important;
	line-height: 1.6 !important;
	margin: 10px 0 !important;
}

.autism-vertical-layout img {
	display: block !important;
	max-width: 100% !important;
	margin: 12px 0 !important;
	height: auto !important;
}

